{% extends 'base.html' %}

{% block title %}Backgrounds - Clone Hero Manager{% endblock %}

{% block content %}
<div class="container">
    <h1>ğŸŒ† Backgrounds Manager</h1>
    <p>Upload and manage backgrounds for Clone Hero! Backgrounds are visual elements used in the game during gameplay.</p>
    
    <!-- Tabs -->
    <div class="tabs">
        <button class="tab-btn active" data-tab="image">ğŸ–¼ï¸ Image Backgrounds</button>
        <button class="tab-btn" data-tab="video">ğŸ¥ Video Backgrounds</button>
    </div>
    
    <!-- Image Backgrounds Tab -->
    <div id="image-tab" class="tab-content active">
        <h2>Image Backgrounds</h2>
        <form id="imageUploadForm" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="bg_type" value="image_backgrounds">
            <div class="form-group">
                <input type="file" name="file" accept=".png,.jpg,.jpeg,.zip,.rar" required>
            </div>
            <button type="submit" class="btn btn-primary">Upload Image Background</button>
        </form>
        <div id="imageStatus" class="status-message" style="display:none;"></div>
        
        <h3>ğŸ“‚ Existing Image Backgrounds</h3>
        <ul class="file-list">
            {% for bg in image_backgrounds %}
            <li><code>{{ bg }}</code></li>
            {% empty %}
            <li>No image backgrounds found.</li>
            {% endfor %}
        </ul>
    </div>
    
    <!-- Video Backgrounds Tab -->
    <div id="video-tab" class="tab-content">
        <h2>Video Backgrounds</h2>
        <form id="videoUploadForm" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="bg_type" value="video_backgrounds">
            <div class="form-group">
                <input type="file" name="file" accept=".webm,.mp4,.avi,.mpeg,.zip,.rar" required>
            </div>
            <button type="submit" class="btn btn-primary">Upload Video Background</button>
        </form>
        <div id="videoStatus" class="status-message" style="display:none;"></div>
        
        <h3>ğŸ“‚ Existing Video Backgrounds</h3>
        <ul class="file-list">
            {% for bg in video_backgrounds %}
            <li><code>{{ bg }}</code></li>
            {% empty %}
            <li>No video backgrounds found.</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/tabs.js' %}"></script>
<script src="{% static 'js/upload.js' %}"></script>
<script>
setupUploadForm('imageUploadForm', '{% url "content:backgrounds" %}', 'imageStatus');
setupUploadForm('videoUploadForm', '{% url "content:backgrounds" %}', 'videoStatus');
</script>
{% endblock %}
